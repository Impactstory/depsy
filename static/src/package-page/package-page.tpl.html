<div class="page entity-page package-page">


    <div class="ti-page-sidebar">
        <div class="sidebar-header">

            <div class="about">
                <div class="meta">
               <span class="name">
                  {{ package.name }}
                   <i popover-title="Research software"
                      popover-trigger="mouseenter"
                      popover="We decide if something is research software based on language, as well as words in project tags, titles, and summaries."
                      ng-show="package.is_academic"
                      class="is-academic fa fa-graduation-cap"></i>
               </span>

                    <div class="summary">
                        {{ package.summary }}
                    </div>
                </div>
                <div class="links">
                    <a class="language-icon r"
                       href="https://cran.r-project.org/web/packages/{{ package.name }}/index.html"
                       ng-if="package.language=='r'">
                        R
                    </a>
                    <a class="language-icon python"
                       href="https://pypi.python.org/pypi/{{ package.name }}"
                       ng-if="package.language=='python'">
                        py
                    </a>
                    <a class="github"
                       ng-show="package.github_repo_name"
                       href="http://github.com/{{ package.github_owner }}/{{ package.github_repo_name }}">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
        </div>



        <div class="sidebar-section tags" ng-if="package.tags.length">
            <h3>Tags</h3>
            <div class="tags">
                <a class="tag" ng-repeat="tag in package.tags">
                    {{ tag }}
                </a>
            </div>
        </div>



        <div class="sidebar-section contribs">
            <h3>Key contributors</h3>
            <div class="contrib"
                 ng-repeat="person_package in package.top_contribs | orderBy: '-credit'">
                <wheel></wheel>
                <img class="person-icon" src="{{ person_package.icon_small }}" alt=""/>
                <a class="name" href="person/{{ person_package.id }}">{{ person_package.name }}</a>
            </div>
        </div>




        <div class="sidebar-section actions">
            <a class="json-link btn btn-default"
               popover-title="View this page as JSON"
               popover-placement="right"
               popover-trigger="mouseenter"
               target="_self"
               popover="Everything here is open data, free to use for your own projects. You can also check out our API for more systematic access."
               href="api/package/{{ package.host }}/{{ package.name }}">
                <i class="fa fa-download"></i>
                JSON
            </a>

            <!--
         <a href="https://twitter.com/share?url={{ encodeURIComponent('http://google.com') }}" >Tweet</a>
         -->


        </div>


    </div>


    <div class="ti-page-body">


        <div class="subscore package-page-subscore overall">
            <div class="body">
                <div class="metrics">
                    <span class="package-percentile">
                        {{ format.round(package.impact_percentile * 100) }}
                    </span>
                </div>
                <div class="explanation">
                    Overall impact percentile compared to all research software on
                    <span class="repo cran" ng-show="package.host=='cran'">CRAN</span>
                    <span class="repo PyPi" ng-show="package.host=='pypi'">PyPi</span>,
                    based on relative
                    <span class="num_downloads">downloads,</span>
                    <span class="pagerank">software reuse,</span> and
                    <span class="num_mentions">citation.</span>
                </div>
            </div>
        </div>

        <div class="subscore package-page-subscore {{ subscore.name }}"
             ng-repeat="subscore in package.subscores">
            <h3>
                <i class="fa {{ subscore.icon }}"></i>
                {{ subscore.display_name }}
            </h3>
            <div class="body">
                <div class="metrics">
                    <div class="impact-stick vis">
                        <div class="bar-inner {{ subscore.name }}" style="width: {{ subscore.percentile * 100 }}%">
                        </div>

                    </div>
                    <span class="main-metric">
                        {{ format.short(subscore.val) }}
                    </span>
                    <span class="percentile">
                        <span class="val">
                            {{ format.round(subscore.percentile * 100) }}
                        </span>
                        <span class="descr">
                            percentile
                        </span>
                    </span>
                </div>

                <div class="explanation">
                    <div class="citations-explanation" ng-show="subscore.name=='num_mentions'">
                        Based on term searches in <br>
                            <span class="citation-link" ng-repeat="link in package.citations_dict">
                                <a href="{{ link.url }}">{{ link.display_name }} ({{ link.count }})</a>
                                <span class="and" ng-show="!$last">and</span>
                            </span>
                    </div>
                    <div class="downloads-explanation" ng-show="subscore.name=='num_downloads'">
                        Based on latest monthly downloads stats from
                        <span class="repo cran" ng-show="package.host=='cran'">CRAN</span>
                        <span class="repo PyPi" ng-show="package.host=='pypi'">PyPi</span>
                    </div>
                    <div class="pagerank-explanation" ng-show="subscore.name=='pagerank'">
                        PageRank of reverse deps
                        <span class="repo cran" ng-show="package.host=='cran'">CRAN</span>
                        <span class="repo PyPi" ng-show="package.host=='pypi'">PyPi</span>
                    </div>
                </div>


            </div>






            <!-- Top Importers. This is just for the pagerank subscore -->
            <div class="top-importers" ng-show="subscore.name=='pagerank' && package.indegree">
                <h4>
                    <div class="main"><i class="fa fa-recycle"></i> Reused by</div>
                    <div class="subheading">
                        <span class="val">{{ package.indegree }}</span> other projects on {{ package.host }} and GitHub.
                      <span class="more" ng-show="package.top_neighbors.length < package.indegree">
                          (showing the top {{ package.top_neighbors.length }})
                      </span>
                    </div>
                </h4>

                <div class="dep-container"
                     ng-repeat="dep in package.top_neighbors | orderBy: ['-is_github', '-impact']">


                    <!-- CRAN or PyPi package -->
                    <div class="package dep" ng-if="dep.host">
                        <div class="top-line">
                            <div class="vis impact-stick is-academic-{{ dep.is_academic }}"
                                 popover-trigger="mouseenter"
                                 popover-title="Impact: {{ format.ordinal(package.impact_percentile * 100) }} percentile"
                                 popover-template="'snippet/package-impact-popover.tpl.html'">
                                <div ng-repeat="subscore in dep.subscores"
                                     class="bar-inner {{ subscore.name }}"
                                     style="width: {{ subscore.percentile * 33.333 }}%;">
                                </div>
                            </div>

                            <a class="name" href="package/{{ dep.language }}/{{ dep.name }}">
                                {{ dep.name }}
                            </a>

                            <i popover-title="Research software"
                               popover-trigger="mouseenter"
                               popover="We decide projects are research software based on their names, tags, and summaries."
                               ng-show="dep.is_academic"
                               class="is-academic fa fa-graduation-cap"></i>
                        </div>
                        <div class="underline">
                            {{ dep.summary }}
                        </div>
                    </div>

                    <!-- GitHub repo -->
                    <div class="github dep" ng-if="!dep.host">
                        <div class="top-line">
                            <div class="vis"
                                 popover-trigger="mouseenter"
                                 popover="{{ dep.stars }} GitHub stars">
                                {{ dep.stars }}
                                <i class="fa fa-star"></i>
                            </div>

                            <span class="name">
                                <a href="http://github.com/{{ dep.login }}/{{ dep.repo_name }}"
                                   popover-trigger="mouseenter"
                                   popover="This {{ dep.language }} project is not in CRAN or PyPi, but it is viewable on GitHub"
                                   class="github-link">
                                    <i class="fa fa-github"></i>
                                </a>
                                {{ dep.repo_name }}
                            </span>
                        </div>
                        <div class="underline">
                            {{ dep.summary }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
